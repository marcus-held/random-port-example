plugins {
	id "com.avast.gradle.docker-compose" version "0.9.4"
	id "java"
}

group = "de.held.randomport"
version = "0.0.1-SNAPSHOT"
sourceCompatibility = JavaVersion.VERSION_11

repositories {
	mavenCentral()
	jcenter()
}

dependencies {
	testImplementation("org.junit.jupiter:junit-jupiter-api:5.5.1")
	testRuntimeOnly("org.junit.jupiter:junit-jupiter-engine:5.5.1")
}

test {
	useJUnitPlatform()
}

dockerCompose.isRequiredBy(test)

dockerCompose {
	useComposeFiles = ['../docker-compose.yml']
	captureContainersOutput = true
}

test.doFirst {
	dockerCompose.exposeAsSystemProperties(test)
}
